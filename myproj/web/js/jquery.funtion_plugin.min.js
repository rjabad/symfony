//Eliminar principal funcion es para eliminar con sus dos BTN
$.fn.Notification = function(opts) {
  var $this = this,
  defaults = {
          messaje:'Esta Seguro Eliminar',    
          type:'success',
          dataType:'Eliminar',
          metodo:null,
          Parameter:null,
          evento:null,
          };
     var listElement = $this;
    settings = $.extend(defaults, opts);
    var html=''; 
    var eve='';
    if (settings.evento!=null) {
      eve=settings.evento+'="'+settings.metodo+'('+settings.Parameter+')"';
    }
    html+='<button type="button" '+eve+' class="btn btn-'+settings.type+'"  >'+settings.dataType+'</button>'
    html+='<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'
    $(listElement).modal();
    $(listElement).find('.modal-body').html(settings.messaje);
    $(listElement).find('.modal-footer').html(html);
};

//Modal para el sistema
$.fn.ModalSistema = function(opts) {
  var $this = this,
  defaults = {
          title:'Cliente',    
          zise:'modal-lg',
          BTN1metodo:null,
          BTN1Parameter:'',
          BTN2metodo:null,
          BTN2Parameter:'',
          BTN1Name:'Guardar'
          };
     var listElement = $this;
    settings = $.extend(defaults, opts);
    var html='',eve1='',eve2='';
    if (settings.BTN1metodo!=null) {
      eve1='onclick="'+settings.BTN1metodo+'('+settings.BTN1Parameter+')"';
      html+='<button type="button" '+eve1+' class="btn btn-primary"  >'+settings.BTN1Name+'</button>'
    }
    if (settings.BTN2metodo!=null) {
      eve2='onclick="'+settings.BTN2metodo+'('+settings.BTN2Parameter+')"';
      html+='<button type="button" '+eve2+' class="btn btn-warning"  >Nuevo</button>';
    }

    html+='<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'
    $(listElement).modal();
    $(listElement).find('.modal-dialog').addClass(settings.zise);
    $(listElement).find('.modal-title').html(settings.title);
    $(listElement).find('.modal-footer').html(html);
};
//metodo para mostrar con un input
$.fn.TableHead = function(opts) {
  var $this = this,
  defaults = {
          messaje:'Actualizar',    
          type:'success',
          dataType:'Guardar',
          metodo:null,
          values:null,
          evento:null,
          data:''
          };
  var listElement = $this;
  settings = $.extend(defaults, opts);
  var html=''; 
  var eve='';
  if (settings.evento!=null) {
    eve=settings.evento+'="'+settings.metodo+'('+settings.values+')"';
  }
    html1='';
    html1+=settings.messaje;
    html1+='<input type="text" name="namHead" id="namHead" value="'+settings.data+'" class="form-control">';
    html+='<button type="button" '+eve+' class="btn btn-'+settings.type+'"  >'+settings.dataType+'</button>'
    html+='<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>'
    $(listElement).modal();
    $(listElement).find('.modal-body').html(html1);
    $(listElement).find('.modal-footer').html(html);
};

//levanta un alert de modal
$.fn.alertmessaje = function(opts) {
	var $this = this,
    defaults = {
		 		messaje:'Mensaje de alerta',		
				type:'success',
				dataType:'Bien hecho'
     			};
     var listElement = $this;
    settings = $.extend(defaults, opts);
    html=''; 
	html+='<div class="alert alert-'+settings.type+'">'
    html+='<strong>¡'+settings.dataType+'!</strong> ';
    html+=settings.messaje;
  	html+='</div>'
	html+='<button type="button" class=" float-right btn btn-'+settings.type+' btn-sm" data-dismiss="modal">OK</button>';
    $(listElement).modal();
    $(listElement).find('.modal-body').html(html);
};


//manda mensajes de alert
$.fn.SendMessajeAlert = function(opts) {
	var $this = this,
    defaults = {
		 		messaje:'Mensaje de alerta',		
				type:'success',
				dataType:'Bien hecho',
				time:3000,
				show:300,
				hide:300
     			};
	var listElement = $this;
	settings = $.extend(defaults, opts);
	errome='';
	errome+='<div class="alert alert-'+settings.type+' alert-dismissible"><a href="#" class="close" data-dismiss="alert">&times;</a>';
	errome+= '<strong>'+settings.dataType+'! </strong> '+settings.messaje;
	errome+= '</div>';
	$(listElement).html(errome).show(settings.show).delay(settings.time).hide(settings.hide);
};

$.fn.SendMessajeDocumento = function(opts) {
  var $this = this,
    defaults = {
        messaje:'Documento Anulado',    
        type:'success',
        dataType:'Bien hecho',
          };
  var listElement = $this;
  settings = $.extend(defaults, opts);
  errome='';

  foter='<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>';
  $(listElement).modal().addClass('show').css('display', 'block');;
  $(listElement).find('.modal-footer').html(foter);
  $(listElement).find('.modal-title').html(settings.title);
  
};

$.fn.MessajeAnulacion=function(opts){
  var $this = this,
    defaults = {
        messaje:'Se ha eliminado. Los colaboradores aún pueden acceder a la información',    
        type:'success',
        time:3000,
        show:300,
        hide:300,
        metodo:null,
        Parameter:null,
        evento:null,
        };
     var listElement = $this;
    settings = $.extend(defaults, opts);
    var html=''; 
    var eve='';
    if (settings.evento!=null) {
      eve=settings.evento+'="'+settings.metodo+'('+settings.Parameter+')"';
    }
  errome='';
  errome+='<div class="alert alert-'+settings.type+' alert-dismissible"><a href="#" class="close" data-dismiss="alert">&times;</a>';
  errome+= settings.messaje+'<a href="#"   '+eve+' >DESHACER</a>';;
  errome+= '</div>';
  $(listElement).html(errome)
  .show(settings.show)
  .delay(settings.time)
  .hide(settings.hide)
  .css({display:'block'});
  //$(listElement).css({display:'block'});
};

//manda mensajes de alert
$.fn.SendAlert = function(opts) {
  var $this = this,
    defaults = {
        messaje:'Mensaje de alerta',    
        type:'success',
        dataType:'Bien hecho',
          };
  var listElement = $this;
  settings = $.extend(defaults, opts);
  errome='';
  errome+='<div class="alert alert-'+settings.type+' alert-dismissible"><a href="#" class="close" data-dismiss="alert">&times;</a>';
  errome+= '<strong>'+settings.dataType+'! </strong> '+settings.messaje;
  errome+= '</div>';
  $(listElement).html(errome);
};

$.fn.FechaSistem = function(opts) {
	var $this = this,
    defaults = {format:'/',
				inslist:'L',
     			};
	var listElement = $this;
	settings = $.extend(defaults, opts);

	var fecha="";
  	var f = new Date();
  	var dia=f.getDate();
  	var mes=(f.getMonth() +1);
  	var anio=f.getFullYear();
  	if(dia<=9){
  		dia="0"+f.getDate();
  	}
  	if(mes<=9){
  		mes="0"+(f.getMonth() +1);
  	}
  	if(settings.inslist=='I'){
    	fecha=anio+'-'+mes+'-'+dia; 
  	}else if(settings.inslist=='L'){
   		fecha=dia+settings.format+mes+settings.format+anio;  
  	}
	$(listElement).val(fecha);
};


  //¡Atento! ¡Cuidado! ¡Error!  ¡Primario!
    //exclamation-triangle check-circle
    //info warning danger primary secondary dark light


// Ajax File upload with jQuery and XHR2
// Sean Clark http://square-bracket.com
// xhr2 file upload
// data is optional
$.fn.upload = function(remote, data, successFn, progressFn) {
    // if we dont have post data, move it along
    if (typeof data != "object") {
        progressFn = successFn;
        successFn = data;
    }
    return this.each(function() {
        if ($(this)[0].files[0]) {
            var formData = new FormData();
            formData.append($(this).attr("name"), $(this)[0].files[0]);

            // if we have post data too
            if (typeof data == "object") {
                for (var i in data) {
                    formData.append(i, data[i]);
                }
            }

            // do the ajax request
            $.ajax({
                url: remote,
                type: 'POST',
                xhr: function() {
                    myXhr = $.ajaxSettings.xhr();
                    if (myXhr.upload && progressFn) {
                        myXhr.upload.addEventListener('progress', function(prog) {
                            var value = ~~((prog.loaded / prog.total) * 100);

                            // if we passed a progress function
                            if (progressFn && typeof progressFn == "function") {
                                progressFn(prog, value);

                                // if we passed a progress element
                            } else if (progressFn) {
                                $(progressFn).val(value);
                            }
                        }, false);
                    }
                    return myXhr;
                },
                data: formData,
                dataType: "json",
                cache: false,
                contentType: false,
                processData: false,
                complete: function(res) {
                    var json;
                    try {
                        json = JSON.parse(res.responseText);
                    } catch (e) {
                        json = res.responseText;
                    }
                    if (successFn)
                        successFn(json);
                }
            });
        }
    });
};